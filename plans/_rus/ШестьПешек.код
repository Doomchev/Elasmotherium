импортировать Текстуру, КлеточнуюКарту

перечисление Клет[]к[а] {пуст[ая], бел[ая]Пешк[а], чёрн[ая]Пешк[а]}
количеств[о]Клеток = 7
количеств[о]Пешек = (количествоКлеток - 1) / 2
начал[о]Чёрных = количествоПешек + 1

доск[а] = Текстура("board.png")
пол[е] = КлеточнаяКарта<Клет[о]к>(количестваКлеток, 1, Текстуры("pawns.png").разрезанной(3), пустой)

начало()
	для(номер[а] = 0 ..< количестваПешек)
    поля(номер) = белаяПешка
    поля(началоЧёрных + номер) = чёрнаяПешка
	сообщить("Вам нужно поменять черные и белые пешки местами. Чёрные пешки ходят влево, белые - вправо. "
			+ "Пешка может пойти на одну клетку вперёд или перепрыгнуть через следующую пешку на свободное поле."
			, "Правила игры")

начало()

отрисовка()
	доску.рисовать()
	поле.рисовать()

нажатиеКнопкиМыши(x, 0, 0)
  номерКлетки = ограничить(поля.хКлетки(х - поля.хКлетки), 0, поля.размераСтроки - 1)
  клетка = поля(номерКлетки)
  если(клетка == белаяПешка и номерКлетки < количестваКлеток - 1)
    следующаяКлетка = поля(номерКлетки + 1)
    если(следующаяКлетка == пустая)
      поля(номерКлетки) = пустая
      поля(номерКлетки + 1) = белаяПешка
    иначе если(номерКлетки < количествоКлеток - 2 и поля(номерКлетки + 2) == пустая)
      поля(номерКлетки) = пустая
      поля(номерКлетки + 2) = белаяПешка
  иначе если(клетка == чёрнаяПешка и номерКлетки < 0)
    предыдущ[ая]Клетк[а] = поля(номерКлетки - 1)
    если(предыдущаяКлетка == пустая)
      поля(номерКлетки) = пустая
      поля(номерКлетки - 1) = чёрнаяПешка
    иначе если(номерКлетки < 1 и поля(номерКлетки - 2) == пустая)
      поля(номерКлетки) = пустая
      поля(номерКлетки - 2) = чёрнаяПешка
  иначе
    вернуться
  
  для(номер[а] = 0 ..< количестваПешек)
    если(поля(номер) != чёрнойПешке или поля(номер + началоЧёрных) != белойПешке) вернуться
  
  сообщить("Вы выиграли!")
  начало()