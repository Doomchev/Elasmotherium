импортировать Текстуру
импортировать КлеточнуюКарту

перечисление Клет[]к[а] {пуст[ая], бел[ая]Пешк[а], чёрн[ая]Пешк[а]}
количеств[о]Клеток = 7
количеств[о]Пешек = (количествоКлеток - 1) / 2
начал[о]Чёрных = количествоПешек + 1

доск[а] = новая Текстура("board.png")
пол[е] = КлеточнаяКарта<Клет[о]к>(длиной количестваКлеток, шириной 1, из новой Текстуры("pawns.png").разрезанной(на 3 по горизонтали), заполненную пустой.Клеткой)

начало()
	для(номер[а] от 0 не доходя до количестваПешек)
    поля.клетка(номер) = белаяПешка
    поля.клетка(началоЧёрных + номер) = чёрнаяПешка
	сообщить("Вам нужно поменять черные и белые пешки местами. Чёрные пешки ходят влево, белые - вправо. "
			+ "Пешка может пойти на одну клетку вперёд или перепрыгнуть через следующую пешку на свободное поле."
			, "Правила игры")

начало()

отрисовка()
	доску.рисовать()
	поле.рисовать()

нажатиеКнопкиМыши(x, 0, 0)
  номерКлетки = ограничить(поля.хКлетки(х - поля.хКлетки), от 0, до поля.размераСтроки - 1)
  клетка = поля.клетка(номерКлетки)
  если(клетка == белаяПешка и номерКлетки меньше количестваКлеток - 1)
    следующаяКлетка = поля.клетка(номерКлетки + 1)
    если(следующаяКлетка == пустая)
      поля.клетка(номерКлетки) = пустая
      поля.клетка(номерКлетки + 1) = белаяПешка
    иначе если(номерКлетки < количествоКлеток - 2 и поля.клетка(номерКлетки + 2) == пустая)
      поля.клетка(номерКлетки) = пустая
      поля.клетка(номерКлетки + 2) = белаяПешка
  иначе если(клетка == чёрнаяПешка и номерКлетки меньше 0)
    предыдущ[ая]Клетк[а] = поля.клетка(номерКлетки - 1)
    если(предыдущаяКлетка == пустая)
      поля.клетка(номерКлетки) = пустая
      поля.клетка(номерКлетки - 1) = чёрнаяПешка
    иначе если(номерКлетки меньше 1 и поля.клетка(номерКлетки - 2) == пустая)
      поля.клетка(номерКлетки) = пустая
      поля.клетка(номерКлетки - 2) = чёрнаяПешка
  иначе вернуться
  
  для(номер[а] от 0 не доходя до количестваПешек)
    если(поля.клетка(номер) не равна чёрнойПешке или поля.клетка(номер + началоЧёрных) не равна белойПешке) вернуться
  
  сообщить("Вы выиграли!")
  начало()